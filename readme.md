 

# AI-Ассистент для Telegram-бота знакомств

Этот проект — продвинутый AI-ассистент на Python, созданный для автоматизации взаимодействия с Telegram-ботом знакомств `@leomatchbot`. Это полноценный цифровой аватар, который обучается определенной личности для ведения реалистичных, человекоподобных диалогов. Конечная цель ассистента — добиться, чтобы собеседник сам проявил инициативу и предложил встретиться.

Проект был разработан как социальный и технический эксперимент для исследования границ применения AI в человеческом общении и проверки гипотезы, сможет ли машина эффективно воспроизвести сложный и тонкий стиль коммуникации.

## Ключевые Возможности

-   **"Двухмозговая" Архитектура:** Скрипт работает с двумя различными "мозгами" на основе AI:
    1.  **"Разведчик":** Работает внутри бота знакомств, автоматически фильтрует анкеты по качеству описания и генерирует уникальные, остроумные первые сообщения.
    2.  **"Собеседник":** Активируется в личных чатах, использует глубоко персонализированный образ для ведения бесед, запоминания контекста и направления диалога к поставленной цели.

-   **Глубокая Персонализация:** Личность AI не является шаблонной. Она строится на основе детального "досье", заложенного в системный промпт: профессия, хобби, чувство юмора, вкусы и даже личные истории. Это делает его ответы последовательными и правдоподобными.

-   **Движок Гипер-реалистичного Взаимодействия:** Чтобы избежать "машинного" общения, ассистент использует несколько продвинутых техник:
    *   **"Живой" Стиль Письма:** Следует неформальному стилю общения (без точек в конце, с использованием сленга) и применяет пост-обработку для очистки ответов AI от "академического" языка.
    *   **Отправка "Лесенкой":** Имитирует человеческую манеру печатать, иногда разбивая одну мысль на несколько коротких, быстро отправленных сообщений.
    *   **Динамическая Задержка Ответа:** Рассчитывает время ответа на основе контекста. Быстрые ответы для активных диалогов и более длительные, реалистичные задержки (от нескольких минут до часов) при возобновлении беседы.
    *   **"Умный Таймер" (Debounce):** Если пользователь отправляет несколько сообщений подряд, AI дожидается паузы, прежде чем составить единый, целостный ответ на весь блок сообщений.
    *   **Статус "Прочитано" и Индикация Набора:** Мгновенно помечает входящие сообщения как прочитанные (две галочки) и показывает статус "печатает..." перед ответом, создавая эффект присутствия.

-   **Надежность и Автономность:**
    *   **"Белый Список":** Позволяет оператору вручную исключать определенных пользователей из обработки AI, обеспечивая плавный переход к ручному общению.
    *   **Постоянная Память:** Сохраняет все истории диалогов в JSON-файл, что позволяет боту выдерживать перезапуски и помнить каждую беседу.
    *   **Обработка Лимитов API:** Корректно обрабатывает ошибки ограничения запросов от API, ожидая рекомендованное время перед повторной попыткой.
    *   **Работа 24/7:** Скрипт предназначен для развертывания на сервере (например, Ubuntu) для непрерывной автономной работы.

## Технологический Стек

-   **Язык:** Python 3.10+
-   **Основная библиотека:** [Pyrogram](https://pyrogram.org/) (для асинхронного взаимодействия с Telegram API)
-   **AI Модель:** Google Gemini 1.5 Flash
-   **Зависимости:** `google-generativeai`, `tgcrypto`, `python-dotenv`

## Установка и Настройка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/ваш-логин/название-репозитория.git
    cd название-репозитория
    ```

2.  **Создайте виртуальное окружение (рекомендуется):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройте ваши ключи:**
    *   Скопируйте файл с примером переменных окружения: `cp .env.example .env`
    *   Откройте файл `.env` в текстовом редакторе (например, `nano .env`).
    *   Заполните ваши `TELEGRAM_API_ID`, `TELEGRAM_API_HASH` (их можно получить на [my.telegram.org](https://my.telegram.org)) и `GEMINI_API_KEY` (его можно получить в [Google AI Studio](https://ai.google.dev/)).

5.  **(Опционально) Настройте личность AI:**
    *   Откройте `main.py` и тщательно отредактируйте переменные `FIRST_MESSAGE_PROMPT` и `CONVERSATION_SYSTEM_PROMPT`, чтобы определить личность и цели вашего AI.

6.  **(Опционально) Добавьте пользователей в "Белый список":**
    *   Узнайте Telegram User ID нужных людей (например, переслав их сообщение боту `@userinfobot`).
    *   Добавьте их числовые ID в файл `whitelist.json`.
    ```json
    [
        123456789,
        987654321
    ]
    ```

## Запуск Бота

1.  **Первый запуск для авторизации:** Запустите скрипт напрямую, чтобы войти в ваш Telegram-аккаунт. Pyrogram запросит номер телефона и код подтверждения.
    ```bash
    python3 main.py
    ```
    После успешного входа будет создан файл `.session`. Можно остановить скрипт (`Ctrl+C`).

2.  **Запуск в фоновом режиме для работы 24/7:** Для непрерывной работы на сервере лучше всего использовать терминальный мультиплексор, например `tmux`.
    ```bash
    # Запустить новую tmux-сессию
    tmux new -s dating_bot

    # Внутри сессии запустить скрипт
    python3 main.py

    # Отсоединиться от сессии можно, нажав Ctrl+B, а затем D. Скрипт продолжит работать.
    # Чтобы вернуться в сессию позже: tmux attach -t dating_bot
    ```

## Дисклеймер

Этот проект является образовательным экспериментом в области AI и автоматизации. Пожалуйста, используйте его ответственно и этично. Автор не несет ответственности за результаты его использования.
